{% extends "core/base.html" %}
{% block title %}Trainings - {{ site_settings.site_name }}{% endblock %}
{% block content %}
<!-- Hero Section -->
<section class="hero-standard">
  <div class="page-header-glow"></div>
  <div class="container position-relative z-2">
    <div class="row justify-content-center text-center">
      <div class="col-lg-8" data-aos="fade-up">
        <span class="section-subtitle">DeepMinds Academy</span>
        <h1 class="display-3 fw-bold mb-4">Master the <span class="text-gradient">Agentic Future</span></h1>
        <p class="lead mx-auto" style="max-width: 700px;">
          Accelerate your career with world-class training in Autonomous Systems, Generative AI, and Advanced Data
          Engineering.
        </p>
      </div>
    </div>
  </div>
</section>

<!-- Courses Section -->
<section class="section-padding py-5">
  <div class="container">
    <div
      class="training-category-bar d-inline-flex flex-wrap justify-content-center gap-2 mb-5 mx-auto d-flex w-max-content"
      data-aos="fade-up" style="max-width: fit-content;">
      <a href="{% url 'core:trainings' %}"
        class="btn btn-sm {% if selected_category == 'All' %}btn-glow{% else %}btn-outline-light border-0{% endif %} rounded-pill px-4 transition-all">All
        Tracks</a>
      {% for cat in categories %}
      <a href="{% url 'core:trainings' %}?category={{ cat }}"
        class="btn btn-sm {% if selected_category == cat %}btn-glow{% else %}btn-outline-light border-0{% endif %} rounded-pill px-4 transition-all">
        {{ cat }}
      </a>
      {% endfor %}
    </div>

    <div class="row g-4">
      {% for t in trainings %}
      <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="{{ forloop.counter0|add:100 }}">
        <div class="glass-card course-card p-0 overflow-hidden border-0 h-100 d-flex flex-column">
          <div class="course-image position-relative" style="height: 220px; background: #0d021f;">
            {% if t.thumbnail %}
            <img src="{{ t.thumbnail.url }}" alt="{{ t.title }}" class="w-100 h-100 object-fit-cover">
            {% else %}
            <div class="w-100 h-100 d-flex align-items-center justify-content-center text-primary-subtle opacity-60">
              <i class="fas fa-terminal fa-5x"></i>
            </div>
            {% endif %}
            <div class="position-absolute top-0 start-0 p-3">
              <span class="badge bg-primary px-3 py-2 rounded-pill small">{{ t.level }}</span>
            </div>
            {% if t.is_popular %}
            <div class="position-absolute top-0 end-0 p-3">
              <span class="badge bg-warning text-dark px-3 py-2 rounded-pill fw-bold small">BEST SELLER</span>
            </div>
            {% endif %}
          </div>
          <div class="p-4 d-flex flex-column flex-grow-1">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <div class="rating-stars small">
                <i class="fas fa-star text-warning me-1"></i>
                <span class="fw-bold">{{ t.rating|default:"4.9" }}</span>
                <span class="text-muted ms-1">({{ t.students_count|default:"0" }} students)</span>
              </div>
              <span class="badge bg-primary-subtle text-primary px-3 py-2 rounded-pill small fw-semibold">
                {{ t.category }}
              </span>
            </div>

            <h4 class="h5 mb-4 course-title fw-bold">{{ t.title }}</h4>

            <div class="mt-auto">
              <div class="course-meta-bar mb-4">
                <div class="meta-item">
                  <i class="fas fa-clock"></i>
                  <span>{{ t.duration }}</span>
                </div>
                <div class="meta-divider"></div>
                <div class="meta-item">
                  <i class="fas fa-video"></i>
                  <span>{{ t.mode }}</span>
                </div>
              </div>

              <div class="d-grid gap-2 mb-4">
                <a href="{% url 'core:training_detail' t.id %}" class="btn btn-syllabus">
                  <i class="fas fa-layer-group me-2"></i> Curriculum Brief
                </a>
              </div>

              <div class="d-flex justify-content-between align-items-center pt-3 border-top border-light">
                <div class="course-price-wrapper">
                  {% if t.discount_price %}
                  <div class="h3 fw-bold mb-0">${{ t.discount_price }}</div>
                  <div class="text-muted text-decoration-line-through small">${{ t.price }}</div>
                  {% else %}
                  <div class="h3 fw-bold mb-0">${{ t.price }}</div>
                  {% endif %}
                </div>
                <a href="{% url 'core:contact' %}?subject=Course Enrollment: {{ t.title }}" class="btn btn-glow px-4">
                  Enroll Now
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      {% empty %}
      <div class="col-12 text-center py-5">
        <div class="glass-card p-5 d-inline-block border-gradient">
          <p class="text-muted lead mb-0">No active training sessions found in this track. Our instructors are currently
            calibrating new neural training modules.</p>
          <a href="{% url 'core:trainings' %}" class="btn btn-glow mt-4">View All Modules</a>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>
{% endblock %}